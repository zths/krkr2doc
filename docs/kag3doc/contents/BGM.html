<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from BGM.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>BGM を使おう</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id3" name="id3">BGM の準備</a>
</h1><div class="para"><div>
　KAG では、BGM として Wave系 ( 無圧縮 Wave と Ogg Vorbis 等 ) と MIDI シーケンスデータと CD-XA の オーディオトラックを再生できます。<br />
　<a target="main" class="jump" href="Prepare.html">準備をしよう</a> を読んで、準備してください。<br />
<br />
　ここでは ( 一応チュートリアルっぽいものなので ) 、CD-DA を使う方法で行きますので、Config.tjs 内で <code class="inlinecode">type</code> を <code class="inlinecode">&quot;CDDA&quot;</code> 、<code class="inlinecode">doubleBuffered=false</code> に設定します。<br />
<br />
　あれ、<code class="inlinecode">cdVolume</code> は指定しなくていいの？ CD-XA じゃなくていいの？ということですが、今回は CD-ROM のドライブをこちらで指定していく方法にしますので、<code class="inlinecode">cdVolume</code> は設定の必要はありませんし、ドライブ検索に必要な情報を持っている CD-XA を使う必要もありません。<br />
<br />
　さて、適当な音楽 CD を CD-ROM ドライブに挿入してください。<br />
</div></div>
<h1><a id="id4" name="id4">とりあえず鳴らしてみよう</a>
</h1><div class="para"><div>
　再生するために playbgm というタグを使います。また、再生停止には stopbgm というタグを使います。すると・・・<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
<em>[playbgm&nbsp;storage=&quot;e:3&quot;]</em><br />
再生中・・・停止するにはクリックしてください。[l]<br />
<em>[stopbgm]</em><br />
</code>
<br />

　さて、ここで playbgm の属性 storage に <code class="inlinecode">e:3</code> と指定されています。<code class="inlinecode">e:</code> は CD-ROM を再生させる CD-ROM ドライブ文字ですので、あなたの環境にあわせてください。その次の 3 は再生させるトラックです。<br />
<br />
　ここではチュートリアルなので <code class="inlinecode">e:</code> をつけていますが、本来は Config.tjs の <code class="inlinecode">cdVolume</code> で指定したボリュームラベルを持つ CD が再生します。<code class="inlinecode">e:</code> のように再生するドライブを指定しないで単にトラック番号の数字のみをかくと、KAG は <code class="inlinecode">cdVolume</code> で指定されたボリュームラベルを持つ CD-ROM ドライブを探しに行きます。<br />
<br />
　また、CD-DA でない形式、たとえば MIDI シーケンスデータを再生させたい場合は、storage 属性に再生させたいファイル名を指定するだけで OK です。<br />
</div></div>
<h1><a id="id5" name="id5">フェードイン・フェードアウト</a>
</h1><div class="para"><div>
　フェードイン・フェードアウトを行うには、fadeinbgm タグと fadeoutbgm タグを使います。<br />
　このとき、time 属性がありますが、これはフェードイン・フェードアウトを行っている間の時間を指定します。<br />

<br />
<code class="bq">[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
<em>[fadeinbgm&nbsp;storage=&quot;e:3&quot;&nbsp;time=5000]</em><br />
再生中・・・停止するにはクリックしてください。[l]<br />
<em>[fadeoutbgm&nbsp;time=5000]</em><br />
</code>
<br />

　なお、これらのタグはフェードイン・フェードアウトの終了を待たないので、終了を待つには [wb] タグを使う必要があります。<br />
</div></div>
<h1><a id="id6" name="id6">そのほかの BGM に関するタグ</a>
</h1><div class="para"><div>
　BGM を入れ替える xchgbgm というタグがあります。Wave 系や MIDI 系では、クロスフェードも可能です (Config.tjs 内を参照してください)。<br />
<br />
　Wave 系で OggVorbis や TCWF 、 Micsoroft ADPCM を利用する場合はプラグインを指定する必要があるので注意してください ( <a target="main" class="jump" href="Prepare.html">準備をしよう</a> を参照してください )。これは 効果音も同じです。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　MIDI 系でクロスフェードを行うには「クロスフェードされることを意図して作られた」データが必要になります ( たとえば同時に再生する２つの曲では同じチャネルを使わない、など )。しかし、あまり現実的ではありません。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
