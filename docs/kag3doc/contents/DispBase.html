<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from DispBase.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>显示背景</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="主页" />
</head>
<body>
<h1><a id="id25" name="id25">显示背景</a>
</h1><div class="para"><div>
　<a id="id26" name="id26" class="targanchor"><dfn>背景</dfn></a>简单来说，就是显示在文字和前景后面的东西。在 KAG 中，（默认情况下）加载 640×480 大小的图像作为背景。<br />
<br />
　试着将一张想要显示的 640×480 图像放在 bgimage 文件夹中。假设这个图像是 bg0.jpg。KAG 的 LZH 文件中没有包含这个图像，所以请随便从什么地方弄来一张(^^)<br />
　然后，将<a target="main" class="jump" href="Letter.html">显示文字</a>中使用的情节改成如下内容。<br />

<br />
<code class="bq"><em>[image&nbsp;storage=&quot;bg0&quot;&nbsp;page=fore&nbsp;layer=base]</em><br />
[wait&nbsp;time=200]<br />
*start|スタート<br />
[cm]<br />
こんにちは。<br />
</code>
<br />

　这里使用 <a id="id27" name="id27" class="targanchor"><dfn>image</dfn></a> 标签，将 bg0.jpg 加载到前台页面的背景层。<br />
　image 标签的 storage 属性指定要加载的文件，扩展名可以省略。KAG 会自动寻找(^^)<br />
<br />
　总之先试着运行一下。<br />
<br /><div class="descimg"><img width="325" height="265" alt="BG_Displayed.jpg" src="BG_Displayed.jpg" /><br />显示了背景</div><br />　那么，"前台页面"、"背景层"是什么呢？<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　如果在 Config.tjs 的 scWidth 和 scHeight 中指定了 640x480 以外的屏幕大小，当然要指定与该图像大小匹配的背景图像。<br />
</div><br />
</div></div>
<h1><a id="id28" name="id28">KAG 的层结构</a>
</h1><div class="para"><div>
　KAG 或者说吉里吉里，屏幕全部是通过称为"层"的东西叠加构成的（与 Photoshop 等的图层相似；将图层写成层是作者的习惯）。<br />
<br />
<br />
　比如，如果是以下这样的显示的话......<br />
<br />
<br /><div class="descimg"><img width="480" height="360" alt="Layers.jpg" src="Layers.jpg" /><br />显示示例</div><br /><br />
　层结构如下所示。<br />
<br />
<br /><div class="descimg"><img width="483" height="452" alt="LayersDesc.jpg" src="LayersDesc.jpg" /><br />层结构</div><br /><br />
　在 KAG 中，首先有一个<a id="id29" name="id29" class="targanchor"><dfn>背景层</dfn></a> base，显示在最深处（底部）。在其前面（上面）有 3 个<a id="id30" name="id30" class="targanchor"><dfn>前景层</dfn></a> 0、1、2。在更前面（上面）有 2 个<a id="id31" name="id31" class="targanchor"><dfn>消息层</dfn></a>。所有前景层和消息层 1 在初始状态下都是隐藏的（隐藏的层可以通过 layopt 标签设置 visible=true 来显示。前景层的情况下也可以通过 image 标签显示）。<br />
　KAG 中有两组相同的层结构，分别称为<a id="id32" name="id32" class="targanchor"><dfn>前台页面</dfn></a> fore 和<a id="id33" name="id33" class="targanchor"><dfn>后台页面</dfn></a> back。前台页面显示在屏幕上，但后台页面无法显示在屏幕上。后台页面主要用于转场（屏幕切换），临时放置图像。<br />
<br />
　在 image 标签的 page 属性和 layer 属性中指定的，分别是指定前台页面还是后台页面（fore / back），以及背景层还是前景层（base / 0 / 1 / 2）。<br />
<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　前景层 3 个、消息层 2 个这个数量是 Config.tjs 的默认设置。<br />
　消息层和前景层的初始数量可以在 Config.tjs 的 numCharacterLayers 和 numMessageLayers 中指定，也可以在运行中用 laycount 标签更改。<br />
</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
　"背景"、"前景"、"前台"、"后台"各自都容易引起混乱，但 page 属性中指定的 fore 表示"前台屏幕"，不表示"前景层"。<br />
　前台页面还是后台页面通过 page 属性分别用 fore、back 指定，前景层的情况下在 layer 属性中指定 0、1、2......，背景层的情况下指定 base。<br />
</div><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
