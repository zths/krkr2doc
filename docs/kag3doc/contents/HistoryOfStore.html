<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from HistoryOfStore.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>通過記録について</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id86" name="id86">通過記録</a>
</h1><div class="para"><div>
　通過記録とは、ユーザが「システム - 前に戻る」を選択することで、一つ前の場面に戻れるように、いくつかのポイントでオートセーブを行うようにする機能です。<br />
<br />
　通過記録を行うには record タグを用いるか、あるいは Config.tjs で <code class="inlinecode">recordHistoryOfStore</code> を設定する必要があります。<br />
<br />
　「システム - 前に戻る」のメニューは標準では非表示になっているので、Config.tjs で <code class="inlinecode">goBackMenuItem.visible</code> を true に設定すれば表示されます。<br />
<br />
　また、「システム - 前に戻る」を選択すればどんどん前に戻ることができるようにできますが、その限度は Config.tjs の <code class="inlinecode">maxHistoryOfStore</code> で指定することができます。あまりにたくさん戻れるようにするとセーブデータが巨大化するので注意してください。通過記録は各栞ごとに個別に保存されます。<br />
<br />
　ちなみに Config.tjs にも設定がある「ラベル記録」とは別の機能ですのでご注意ください。<br />
</div></div>
<h1><a id="id87" name="id87">通過記録されるタイミング</a>
</h1><div class="para"><div>
　record タグを書くと、その時点での状態を通過記録することができます。また、Config.tjs の <code class="inlinecode">recordHistoryOfStore</code> の設定によっては自動的に通過記録を行うことができます。<br />
　ただし、record タグを書いた時点や、<code class="inlinecode">recordHistoryOfStore</code> で指定したタイミングですぐに通過記録されるわけではありません。次の「栞を保存可能なラベル」を通過した時点で記録がされます ( この時点で「システム - 前に戻る」 で前に戻れるようになります )。ただし記録されるのは その一つ前の「栞を保存可能なラベル」を通過した時点での状態で、「システム - 前に戻る」を選択すればその位置に戻ることになります。<br />
</div></div>
<h1><a id="id88" name="id88">record タグを書く位置</a>
</h1><div class="para"><div>
　小規模なシナリオでは <code class="inlinecode">recordHistoryOfStore</code> を設定して、自動的に通過記録を行わせると楽かも知れませんが、大規模なシナリオの場合は自動的に通過記録を行わせることはせずに、手動で record タグを書いて、通過記録を行う位置を指定した方が良いと思います。<br />
<br />
　通過記録を、たとえば選択肢が表示される場面で行えば、ユーザが「システム - 前に戻る」を選択すれば、前の選択肢の位置に戻ることができます。<br />
<br />
　この場合は、選択肢で停止するための [s] タグの前あたりに record タグを記述すれば OK です。とくに選択肢がいくつも連続するような場面では 手動で 通過記録を行った方がプレーしやすいかも知れません。<br />
<br />
　ユーザが「システム - 前に戻る」を選択しても、record タグを書いた、その位置に戻るわけではありません。record タグの直前にある「栞を保存可能なラベル」の位置に戻ります。<br />
<br />
　ちなみに、「栞を保存可能なラベル」から次の「栞を保存可能なラベル」までの間にいっさい l, p, s タグがなかった場合は、そこに record タグを記述しても通過記録はされません。「システム - 前に戻る」を選択できるのは l, p, s タグで停止中の場合のみのため、l, p, s タグが無い場所に通過記録を行うと、それよりも前に戻れなくなってしまうためです。<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
