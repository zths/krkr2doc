<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from SaveData.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>栞の数据に関して</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="主页" />
</head>
<body>
<h1><a id="id183" name="id183">栞の保存場所</a>
</h1><div class="para"><div>
　KAGの栞の保存場所は「吉里吉里设置」(krkrconf.exe)で设置します。 吉里吉里で设置できる选项のうち、-datapath 选项が栞の保存場所になります。设置可能な值关于は、吉里吉里２ SDK ヘルプの「コマンドライン选项」を参照してください。<br />
</div></div>
<h1><a id="id184" name="id184">フリーセーブモード</a>
</h1><div class="para"><div>
　KAG が栞を管理する方法には２つあります。<br />
<br />
<ul><li>あらかじめ用意された栞の場所にのみ保存できるモード</li><li>自由な場所に栞を保存できるモード(フリーセーブモード)</li></ul><br />
　これらは Config.tjs の <code class="inlinecode">freeSaveDataMode</code> で设置します。<br />
<br />
　「あらかじめ用意された栞の場所にのみ保存できるモード」では、菜单バーの「栞をたどる」「栞をはさむ」の下に、栞を保存可能な各場所を表すサブ菜单項目ができ、ユーザはそれらを選択することで栞を保存したり読み込んだりすることができます。<br />
<br />
　これに対して「フリーセーブモード」は KAG3 3.09 beta 5 から使用可能になったモードで、「栞をたどる」や「栞をはさむ」を選択すると、文件選択の对话框ボックスが開き、自由に栞文件を選んだり、自由な名前や自由な場所に栞文件を保存することができます。<br />
<br />
　「あらかじめ用意された栞の場所にのみ保存できるモード」では栞の最大数を作品を作る側で制限することができます。<br />
<br />
　「フリーセーブモード」では栞の最大数の制限はありません。各栞を単一の文件として管理できるため、文件夹ごとに分類して保存したり、文件名としてコメントを記入したりする事ができます。エクスプローラで文件夹間を移動させたりできますし、文件に「読みとり専用属性」をつければ、大切な数据に上書きすることも回避できます。<br />
　「フリーセーブモード」でのデフォルトの文件名となるのは、セーブ可能なラベルの「見出し」です。<br />
<br />
　「フリーセーブモード」で注意しなければならないのは、特に系统变量と通常の变量の関係が密接な作品の場合に、たとえば、作品を再インストールして系统变量がクリアされている状態で、古い栞の数据を読み込もうとすると数据に矛盾が生じるかもしれないということです ( 作品の作り方によります )。<br />
　フリーセーブモードであっても、系统变量や系统の状態を保存する文件は、上記「栞の保存場所」で説明した場所に保存されます。<br />
<br />
　また、他の吉里吉里/KAGの作品の数据を間違って読み込んでしまわないように、Config.tjs の saveDataID を设置しておくことをおすすめします ( デフォルトのままでも動作はしますがおすすめできません )。<br />
　saveDataID は、栞数据に埋め込まれる ID を指定するもので、他の吉里吉里/KAGの作品と(たとえ他の方などの作品であっても)重ならないように、作品ごとに異なっている必要があります。ここで指定する ID は栞数据に埋め込まれ、他の栞数据と区別されるためだけに使用されるので、説明的である必要はありません。键盘を適当に叩いた文字３０文字などでも良いのですが、ここの ID を思いつくのが面倒な方は <a target="_top" class="jump" href="http://kikyou.info/uuidgen/uuidgen.php">http://kikyou.info/uuidgen/uuidgen.php</a> でも ID を取得することができます ( ここで取得できる ID は、絶対に他の ID と重ならないと見なすことができます )。<br />
</div></div>

<h1><a id="id185" name="id185">サムネイル画像の保存</a>
</h1><div class="para"><div>
　Config.tjs の <code class="inlinecode">saveThumbnail</code> を true に设置することで、栞数据の拡張子は .BMP になり、画像としても栞数据としても有効な文件を出力することができます。この場合、画像としては、栞を保存した時点での 画面のスナップショットが縮小された画像 (サムネイル画像) になります。セーブ可能なラベル位置でのスナップショットではありませんので、その栞から再開するときは、その場面そのものの位置からではなくて、その直前のセーブ可能なラベルから開始されます (サムネイルの画像と再開される実際の位置が少々食い違う可能性があるということです)。<br />
　これにより、とくにフリーセーブモードにおいて、エクスプローラや画像管理ソフトの「縮小表示」や「縮小版」、「サムネイル」などで栞数据を管理しやすくなります。また、フリーセーブモードの文件選択对话框の文件の表示形式で「縮小表示(縮小版)」を選択することにより、サムネイルから栞を選択することが可能になります。<br />
<br />
　サムネイル画像を持った栞数据は BMP ですので、他のアプリケーションなどで開くこともできますが、通常、他のアプリケーションなどでいったん開いて保存しなおすと、KAG の栞数据としては読み込めない物になるので注意が必要です。<br />
<br />
　右クリックサブルーチンで栞の保存を行う場合はすこし注意が必要になります ( locksnapshot タグと unlocksnapshot タグを参照してください )。<br />
</div></div>

<h1><a id="id186" name="id186">アップデートと栞数据の互換性</a>
</h1><div class="para"><div>
　KAG ではセーブ/ロードは必ずラベルを目印にして行われているため、ある程度のシナリオ文件の変更でも、栞数据の互換性を保つことができます。<br />
　互換性が失われる例はいくつかありますが、代表的なものとして<br />
<br />
<ul><li>シナリオ文件中でセーブ可能なラベルが変更されたり、消えたりした ( そのラベルから開始できないため )</li><li>サブルーチンからの戻り先の構造が変わった ( 正しくサブルーチンの呼び出し元に戻れないため )</li></ul><br />
などがあります。<br />
<br />
　パッチなどを後から配布してアップデートを行う場合はこのようなことに注意してください。<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
