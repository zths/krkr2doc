<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from PortFromOldKAG.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>KAG 3 未満からの移植と KAG 3 での新機能</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="主页" />
</head>
<body>
<h1><a id="id127" name="id127">KAG 3 未満からの移植关于</a>
</h1><div class="para"><div>
　KAG 3 はそれまでの KAG を新しく書き直したもので、シナリオレベルでの互換性はありますが、細かい差異もあります。<br />
　もっとも大き変更は、シナリオ文件中の改行を無視するようになったことですが、これは Config.tjs の <code class="inlinecode">global.ignoreCR</code> を <code class="inlinecode">false</code> に指定することで旧 KAG の動作と同じにすることができます。<br />
　また、quake タグの time 属性は、KAG 3 では ms 単位になりました。KAG 3 未満の、文字数単位にしたい場合は Config.tjs の <code class="inlinecode">defaultQuakeTimeInChUnit</code> を <code class="inlinecode">true</code> に设置してください。<br />
<br />
　KAG 3 未満に比べて、文字が大きめに出てきます。小さめの字体を指定してみてください。<br />
<br />
　セーブ数据の保存場所は、デフォルトで実行可能文件のある文件夹以下の savedata 文件夹になっていますのでご注意ください。<br />
<br />
　タグもいくつかの相違点があります。<br />
<ul>  <li>emb タグに zenkaku 属性がない</li>  <li>playvideo の usesound 属性廃止</li>  <li>clearsysvar は系统变量をクリアするだけ</li></ul><br />
　他にも動作が違うタグがあるかもしれませんが、おそらく KAG 3 のバグかと思います。変に思ったら作者までご一報ください。<br />
　插件の扱いの違い关于は <a target="main" class="jump" href="Prepare.html">準備をしよう</a> の「插件关于」をご覧ください。<br />
</div></div>
<h1><a id="id128" name="id128">KAG 3 の新機能</a>
</h1><div class="para"><div>
<dl>
<dt>KAG のシナリオ解析部を吉里吉里２本体に内蔵</dt>
<dd>　吉里吉里２本体には KAG のシナリオを解析するための機能が組み込まれまし
た。KAG 2.x では TJS 脚本で処理していましたが、これを本体に内蔵す
ることによってシナリオの解析速度が飛躍的に高速化されました。</dd>
<dt>ほとんどのタグに cond 属性が使える</dt>
<dd>　cond 属性はほとんどすべてのタグに使用でき、cond=&quot;式&quot; で指定した式が真
の場合だけ、そのタグを実行するようになります。たとえば、<br />

<br />
<code class="bq">[jump&nbsp;cond=&quot;f.flag1==0&quot;&nbsp;target=*loop]<br />
</code>
<br />

と記述すると、f.flag1 が 0 の時だけ *loop というラベルにジャンプする、と
いう意味になります。</dd>
<dt>アニメーション信息文件が asq から asd になった</dt>
<dd>　より汎用性の高い形式である asd 形式になりました。配布文件中の
asq2asd は asq 文件を asd 文件に変換する脚本です。asd ファ
イルの記述关于は AnimationLayer.tjs 内をご覧ください。<br />
　また、アニメーションセグメントと呼ばれる方法を使って、一つの画像に対し
て複数のアニメーションを同時に実行できます。</dd>
<dt>メッセージ履歴が縦書き表示できるようになった</dt>
<dd>　横書きに加えて縦書き表示ができるようになりました。Config.tjs で设置し
ます。</dd>
<dt>セーブ数据の暗号化が可能に</dt>
<dd>　セーブ数据に簡単な暗号化をかけることができるようになりました。
Config.tjs で设置します。</dd>
<dt>UNICODE 文件への対応</dt>
<dd>　吉里吉里２が出力するテキスト文件は基本的に UNICODE ( UTF-16 ) です。<br />
　セーブ数据などは UNICODE で出力されます。UNICODE を扱うことのできる
テキスト编辑器を用意しておくと便利かと思います。<br />
　また、吉里吉里２へ読み込ませる文件 ( KAG シナリオなど ) として UNICODE 形式の
テキスト文件を読み込ませることが可能になりました。</dd>
<dt>ムービー形式として MPEG に正式対応</dt>
<dd>　MPEG を再生できるようになりました。アーカイブ内に MPEG 文件を納め
ても再生できます。<br />
　ただし、ムービーを再生するには、吉里吉里２本体に付属している
krmovie.dll を、吉里吉里２本体と同じ文件夹においておく必要があります。<br />
　また、ムービーを再生するために DirectX8 以降が OS にインストールされて
いる必要があります(DirectX9以降を推奨します)。</dd>
<dt>レンダリング済み字体への対応</dt>
<dd>　レンダリング済み字体を使用することによって、OS や環境による字体
の違いや、字詰めの問題を回避できます。また、作成者側の環境での字体デ
ータを用いるため、プレーヤの環境にない字体や外字を使用することができ
ます。<br />
　レンダリング済み字体を作成するには krkrfont.exe を使います。</dd></dl></div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
