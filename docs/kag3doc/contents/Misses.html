<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from Misses.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>陥りやすいミス</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id122" name="id122">陥りやすいミス</a>
</h1><div class="para"><div>
　ありがちなミスや不都合を生みやすいポイントを紹介します。<br />
<br />
<dl>
<dt>スキップしても大丈夫ですか?</dt>
<dd>　KAGはクリックや「次の選択肢まで進む」、スペースキーやEnterキーの長押しでスキップモードにはいります。このとき、たとえば時間制限選択肢でスキップの動作が禁止されていないとすぐにタイムオーバーになってしまいます ( これを避けるには時間制限選択肢が来たら @cancelskip して @clickskip enabled=false し、時間制限選択肢が終わったら @clickskip enabled=true する )。また、スタッフロールやデモシーンでもスキップとのかねあいを考慮する必要があります。<br />
　「自動的に読み進む」も、単純にクリック待ちを行うつもりで p タグなどを使った場合に問題になる場合があります。「自動的に読み進む」を強制的に解除するには cancelautomode タグを使います。<br />
<br />
　また、trans タグに対応している wt タグがないなと、<em>「何か時間をかけて処理を行うタグ」と「それに対応する『待つ』タグ」がない場合は問題が発生する</em>ことがあります。マクロなどを使ってこれらを常に組みにしてつかうならば問題ありませんが、複数の「何か時間をかけて処理を行うタグ」を組み合わせてオーバーラップさせて使うような場合は特に注意が必要です。</dd>
<dt>栞をたどっても大丈夫ですか?</dt>
<dd>　KAGのセーブとロード関連にはクセがあり、栞をたどるときにメッセージレイヤに記述された内容までは復元できず、つねにすべてのメッセージレイヤがクリアされた状態から実行が開始されます。また、トランジションやBGMや効果音のフェードなどもすべて停止した状態で開始します。これらはすべて「セーブ可能なラベル」から開始されますので、<em>セーブ可能なラベルの直後で cm や ct タグのような、メッセージレイヤをクリアするためのタグがあるか (あるいはセーブ可能なラベルの位置ですべてのメッセージレイヤがクリアされた状態から開始しても問題ないか )</em>、また、<em>セーブ可能なラベルがトランジション中であったり、フェードアウト中であったりしないかどうか</em>などをよくチェックしてください。</dd>
<dt>状態は復元できていますか?</dt>
<dd>　たとえばCGモードを作って、CGモード中ではメッセージレイヤなどの状態をCGモード用に変更したら、当然CGモードを抜けるときにはその状態を元に戻さないとなりません。</dd>
<dt>メッセージ履歴はOKですか?</dt>
<dd>　メッセージ履歴にどのような物が表示されているかは一応確認しておくと良いと思います。</dd>
<dt>ウェイトがマシンスペックによって変わるような作りになってませんか?</dt>
<dd>　wait は、mode 属性を指定しないと、単に time 属性で指定された時間を待ちます。ですから、１秒ごとに何かを表示しようとして<br />

<br />
<code class="bq">@wait&nbsp;time=1000<br />
@何かの表示など<br />
@wait&nbsp;time=1000<br />
@何かの表示など<br />
@wait&nbsp;time=1000<br />
@何かの表示など<br />
</code>
<br />

　と指定しても<em>正確に１秒ごとにはなりません</em>。wait 自体は確かに1秒を待ちますが、「何かの表示など」で消費される時間を考慮していないためです。<br />
　従って、これを正確に１秒ごとにしたい場合は、resetwait タグと wait mode=until を使って、<br />

<br />
<code class="bq">@resetwait<br />
@wait&nbsp;mode=until&nbsp;time=1000<br />
@何かの表示など<br />
@wait&nbsp;mode=until&nbsp;time=2000<br />
@何かの表示など<br />
@wait&nbsp;mode=until&nbsp;time=3000<br />
@何かの表示など<br />
</code>
<br />

　とします。resetwait で指定した時間原点からの時間を wait mode=until で待つという感じになります。</dd></dl></div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
