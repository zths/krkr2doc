<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from Plugins.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>插件について</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="主页" />
</head>
<body>
<h1><a id="id205" name="id205">插件とは</a>
</h1><div class="para"><div>
　吉里吉里に接続して、吉里吉里の功能を拡張するために使われます。<br />
　現段階で、吉里吉里で使用可能な插件の種類には３つあり、<br />
<ul><li>Susie Plug-in (画像加载と存档アクセス)</li><li>WaveSoundBufferで再生可能な形式を拡張するための插件</li><li>そのほかの吉里吉里専用の插件</li></ul>　となっています。<br />
<br />
　插件を使用する場合は <a target="main" class="jump" href="f_Plugins_link.html">Plugins.link</a> 方法を使用して吉里吉里本体に接続する必要があります。<br />
</div></div>

<h1><a id="id206" name="id206">插件の検索</a>
</h1><div class="para"><div>
　<a target="main" class="jump" href="f_Plugins_link.html">Plugins.link</a> 方法では、指定された插件を以下の順序で探します。<br />
<ol><li>吉里吉里本体と同じ文件夹</li><li>吉里吉里本体以下と同じ文件夹にある plugin 文件夹内</li><li>自動検索パス</li></ol><br />
　自動検索パスが、存档内などローカル文件としてアクセスできない場所にあると、吉里吉里は插件を<em>吉里吉里本体と同じ文件夹</em>に展開しようとします。これが問題を起こすことがあるため、插件は「吉里吉里本体と同じ文件夹」か「吉里吉里本体以下と同じ文件夹にある plugin 文件夹内」に置くことを<em>強く推奨します</em>。<br />
　また、吉里吉里の设置ツール ( Releaser や krkrconf.exe、-userconf オプション、エンジン设置.exe ) は、插件ごとの埋め込みオプションの信息を収集するために插件を探しますが、以下の順序で探します。<br />
<ol><li>吉里吉里本体と同じ文件夹</li><li>吉里吉里本体以下と同じ文件夹にある plugin 文件夹内</li></ol><br />
　吉里吉里の设置ツールは自動検索パスまでは検索しないため、设置項目を含む插件は「吉里吉里本体と同じ文件夹」か「吉里吉里本体以下と同じ文件夹にある plugin 文件夹内」に置かなければなりません。<br />
</div></div>
<h1><a id="id207" name="id207">插件の自動加载</a>
</h1><div class="para"><div>
　吉里吉里は插件を自動的に検索して起動時に読み込む功能があります。自動的に插件を読み込ませたい場合は、插件の拡張子を dll から tpm に変更する必要があります。<br />
　吉里吉里は起動時 (startup.tjsを执行する直前) に、以下の文件夹から拡張子 tpm の文件を探し、插件として自動的に加载ます。<br />
<ul><li>吉里吉里本体と同じ文件夹</li><li>吉里吉里本体以下と同じ文件夹にある plugin 文件夹内</li></ul><br />
　吉里吉里は探した插件を名前で昇順に並び替え、その順序で插件を加载ます。たとえば、aaa.tpm は aab.tpm よりも先に読み込まれます。これは插件のおいてある文件夹には影響せず、插件の名前にのみ影響されます (吉里吉里本体と同じ文件夹に z.tpm があっても、plugin 文件夹内に a.tpm があれば a.tpm が先に読み込まれます )。插件の加载順序を規定したい場合は、插件の文件名を変える必要があります。<br />
</div></div>
<h1><a id="id208" name="id208">插件の作成について</a>
</h1><div class="para"><div>
　吉里吉里のソース中に、吉里吉里付属の插件のソースがありますので参考にしてみてください。<br />
　現段階では、「その他の吉里吉里専用の插件」の仕様は<em>固まっていません</em>。将来仕様が変更されても、ソースレベルでの互換性は保たれるとおもうので、バイナリレベルでの互換性が失われた場合でも、吉里吉里本体に合わせて再構築すれば使えるようになるとは思います。<br />
</div></div>
<h1><a id="id209" name="id209">Susie Plug-in について</a>
</h1><div class="para"><div>
　Takechin 氏作の画像ビューア「Susie32」用の插件を利用することができます。<br />
　00IN 形式 (画像用插件) と 00AM 形式 (存档用插件) を使うことができますが、以下の制限、あるいは吉里吉里独自の仕様があります。<br />
<br />
<ul><li>吉里吉里は拡張子で画像の形式を判断するため、本来の拡張子 ( GetPluginInfo 関数が返すもの ) と違う拡張子がついたような画像に対応できない ( 存档は対応形式をすべてチェックするので拡張子が異なっていても OK )</li><li>32bpp のビットマップはアルファチャンネル付きのビットマップとして見なされる</li><li>一部、受け付けられないビットマップ形式がある (RLE 圧縮された物や BITFIELDS が指定されているものなど )</li><li>Susie 插件経由での画像加载や存档アクセスは、吉里吉里がネイティブに扱う画像形式や xp3 存档に比べてパフォーマンスがかなり低くなる</li><li>存档中の文件はメモリ上に展開されるため、大きな文件を扱うには不向き</li><li>存档内存档には未対応</li><li>Mac binary には未対応</li></ul><br />
　また、Susie plug-in の規格に完全に対応していない插件の中には、吉里吉里と相性の悪い插件も存在します。<br />
</div></div>
<h1><a id="id210" name="id210">吉里吉里付属の插件について</a>
</h1><div class="para"><div>
　吉里吉里に標準で添付されている插件の说明です。<br />
<br />
<dl>
<dt><a id="id211" name="id211" class="targanchor"><dfn>wuvorbis.dll</dfn></a></dt>
<dd>　<a id="id212" name="id212" class="targanchor"><dfn>OggVorbis</dfn></a> を吉里吉里で再生可能にするための插件です。</dd>
<dt><a id="id213" name="id213" class="targanchor"><dfn>wumsadp.dll</dfn></a></dt>
<dd>　<a id="id214" name="id214" class="targanchor"><dfn>Microsoft ADPCM</dfn></a> 形式の .wav 文件を吉里吉里で再生可能にするための插件です。</dd>
<dt><a id="id215" name="id215" class="targanchor"><dfn>wutcwf.dll</dfn></a></dt>
<dd>　<a id="id216" name="id216" class="targanchor"><dfn>TCWF</dfn></a> 形式の文件を吉里吉里で再生可能にするための插件です。</dd>
<dt><a id="id217" name="id217" class="targanchor"><dfn>extrans.dll</dfn></a></dt>
<dd>　吉里吉里本体の转场の種類を拡張するための插件で、吉里吉里本体に接続するといくつかの转场が使用可能になります。<br />
　この插件の使い方については <a target="main" class="jump" href="Transition.html">转场について</a> を参考してください。</dd>
<dt><a id="id218" name="id218" class="targanchor"><dfn>dirlist.dll</dfn></a></dt>
<dd>　指定されたディレクトリ内にある文件のリストを得るための插件です。<br />
　この插件を接続すると <a id="id219" name="id219" class="targanchor"><dfn>getDirList</dfn></a> という関数が使用可能になります。<br />
<code class="inlinecode">getDirList(ディレクトリ)</code><br />
　の形式で指定すると、そのディレクトリ内にあるすべての文件のリストを
数组で返してきます。このリストにはディレクトリも含まれ、ディレクトリの場合は
要素の字符串の最後に '/' がついています。<br />
　また、このリストには通常、 './' と '../' の２つの要素が含まれます。<br />
　この関数は指定されたディレクトリ直下の文件のリストを得るだけで、再帰的に
それよりも下層のディレクトリの文件を得ることはありません。</dd>
<dt><a id="id220" name="id220" class="targanchor"><dfn>fftgraph.dll</dfn></a></dt>
<dd>　WaveSoundBuffer と同期して、簡易的なスペクトラムアナライザー（スペアナ）を显示させるための
插件です。<br />
　この插件を接続すると <a id="id221" name="id221" class="targanchor"><dfn>drawFFTGraph</dfn></a> という関数が使用可能になります。<br />
　使い方は吉里吉里ソースに含まれる fftgraph のソースおよび KAG 用のスペアナ插件を
参考してください。</dd>
<dt><a id="id222" name="id222" class="targanchor"><dfn>win32ole.dll</dfn></a></dt>
<dd>　ActiveX コントロール吉里吉里の窗口に貼り付けたり、OLE オートメーション可能な对象を吉里吉里から操作するための插件です。<br />
　これを使用すると、たとえば吉里吉里の窗口に Web ブラウザ (Internet Explorer) や メディアプレーヤを貼り付けたり、Excel を吉里吉里から操作したりすることができます。<br />
　使用方法については 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs">kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs</a> および <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/win32ole">kirikiri2/trunk/kirikiri2/tests/win32ole</a> ディレクトリを参考してください。<br />
</dd>
<dt><a id="id223" name="id223" class="targanchor"><dfn>wsh.dll</dfn></a> (experimental)</dt>
<dd>　吉里吉里で JScript、VBScript、PerlScript を使用可能にする插件です (RubyScript の動作については調整中です)。<br />
　この插件を接続すると、<a target="main" class="jump" href="f_Scripts_exec.html">Scripts.exec</a> と <a target="main" class="jump" href="f_Scripts_execStorage.html">Scripts.execStorage</a> が拡張されます。<br />
　Scripts.exec は第２引数に 拡張子、あるいは ProgId 、あるいは CLSID を受け付けるようになります。Scripts.execStorage も Scripts.exec 同様に第２引数に拡張子、あるいは ProgId 、あるいは CLSID を受け付けるようになりますが、第２引数が省略された場合は第１引数の拡張子から言語が決定されます。<br />
　拡張子は js, vbs, pl, rb のいずれかで、ProgId は、それぞれ JScript, VBScript, PerlScript, RubyScript となります。CLSID を指定する場合は、脚本エンジンの类IDを指定します。これら以外の拡張子が渡された場合は TJS 脚本として执行します。<br />
　使用方法については 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/wsh">kirikiri2/trunk/kirikiri2/tests/wsh</a> ディレクトリを参考してください。<br />
</dd>

<dt><a id="id224" name="id224" class="targanchor"><dfn>agg.dll</dfn></a> (experimental)</dt>
<dd>　吉里吉里で <a class="jump" href="http://www.antigrain.com/">AGG (Anti-Grain Geometry)</a> を利用して図形描画を行う插件です。<br />
　簡易的な SVG 加载/描画功能を利用することができます。<br />
　SVG を描画するには、たとえば
<br />
<code class="bq"><span class="weak">例子:</span><br />var&nbsp;svg&nbsp;&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
var&nbsp;svg1&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
</code>
<br />

とします (もとの AGG の SVG 加载サポートの制限により、読み込めない SVG が多いです)。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg</a> ディレクトリを参考してください。<br />
</dd>


<dt><a id="id225" name="id225" class="targanchor"><dfn>csvParser.dll</dfn></a> (experimental)</dt>
<dd>　吉里吉里で CSV (Comma Separated Values) 文件を読み込むための插件です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser/">kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser</a> ディレクトリを参考してください。<br />
</dd>


<dt><a id="id226" name="id226" class="targanchor"><dfn>expat.dll</dfn></a> (experimental)</dt>
<dd>　吉里吉里で <a class="jump" href="http://expat.sourceforge.net/">Expat</a> を通じて XML ァイルを読み込むための插件です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/expat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/expat</a> ディレクトリを参考してください。<br />
</dd>


<dt><a id="id227" name="id227" class="targanchor"><dfn>json.dll</dfn></a> (experimental)</dt>
<dd>　吉里吉里で <a class="jump" href="http://www.json.org/">JSON</a> を読み込むための插件です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/json/">kirikiri2/trunk/kirikiri2/src/plugins/win32/json</a> ディレクトリを参考してください。<br />
</dd>

<dt><a id="id228" name="id228" class="targanchor"><dfn>layerExImage.dll</dfn></a> (experimental)</dt>
<dd>　图层に対し、明度とコントラストの調整、色相と彩度の調整、ノイズ添加を読み込むための插件です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage</a> ディレクトリを参考してください。<br />
</dd>

<dt><a id="id229" name="id229" class="targanchor"><dfn>perspective.dll</dfn></a> (experimental)</dt>
<dd>　图层のパースペクティブ変形を行う插件です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExPerspective/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerPerspective</a> ディレクトリを参考してください。<br />
</dd>


<dt><a id="id230" name="id230" class="targanchor"><dfn>saveStruct.dll</dfn></a></dt>
<dd>Array/Dictionary の saveStruct の処理を、Unicode (UTF-16)ではなく、現在のコードページまたは UTF-8 で出力可能にする物です。<br />
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct/">kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct</a> ディレクトリを参考してください。<br />
</dd>


<dt><a id="id231" name="id231" class="targanchor"><dfn>fstat.dll</dfn></a></dt>
<dd>Storages 类に、文件のサイズや更新日時などの信息を取得したり、文件を存储システム内から取り出す方法を添加します。
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat</a> ディレクトリを参考してください。<br />
</dd>

<dt><a id="id232" name="id232" class="targanchor"><dfn>clipboardEx.dll</dfn></a>(experimental)</dt>
<dd>Clipboard 类に、画像やTJS式をクリップボードを介してやりとりする功能や、クリップボードの更新を自動検知するハンドラを登録する功能を添加します。
　詳しくは 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx/">kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx</a> ディレクトリを参考してください。<br />
</dd>



</dl><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
