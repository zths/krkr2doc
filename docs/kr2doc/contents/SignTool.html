<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!-- generated by to_html.pl from SignTool.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>キー・署名ツール</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里相关参考标准样式" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="主页" />
</head>
<body>
<h1><a id="id241" name="id241">キー・署名ツール关于</a>
</h1><div class="para"><div>
　キー・署名ツールは、配布する数据に対し、簡単な<a id="id242" name="id242" class="targanchor"><dfn>電子署名</dfn></a>を行うためのツールです。<br />
　電子署名を使えば、文件が正当な制作者によって作成された物であることのチェック、文件の改ざんチェック、破損チェックを行うことができます。<br />
　現在では、<a target="main" class="jump" href="FileChkTool.html">文件破損チェックツール</a>がこの署名を利用します。<br />
</div></div>

<h1><a id="id243" name="id243">公開鍵・秘密鍵关于</a>
</h1><div class="para"><div>
　キー・署名ツールを使うためには、このツールを使って「<a id="id244" name="id244" class="targanchor"><dfn>公開鍵</dfn></a>」(public key)と「<a id="id245" name="id245" class="targanchor"><dfn>秘密鍵</dfn></a>」(private key)という２つの対になる(ペアになる)キー(<a id="id246" name="id246" class="targanchor"><dfn>キーペア</dfn></a>)を作成する必要があります。<br />
　鍵といっても、実体は以下のような形式の字符串です。<br />

<br />
<code class="bq">-----BEGIN&nbsp;PUBLIC&nbsp;KEY-----<br />
MIGJAoGBAJYfPysW57qE3J2ddGWEG+RzXUzFkWa0ct3p7qJfuWDB+52DbfS9qSpw<br />
iTHQ54vl7K35x+WDQdn29cfgJxp9UD3fzY4h6E2ReE9vj4h0FCMK8dpCFnQkOD/M<br />
hDSiXfXz7KmfMXppM0CjofvH+IL7BJ3/GcLFcuEw3hEnzoajIm1TAgMBAAE=<br />
-----END&nbsp;PUBLIC&nbsp;KEY-----<br />
</code>
<br />

　公開鍵は公開してもかまわないキー、秘密鍵は公開してはならないキーです。<br />
　署名を行うときには秘密鍵を用います。電子署名は、その秘密鍵を使って生成します。<br />
　その署名を確認するときには公開鍵を用います。秘密鍵と公開鍵は常に対になり、該当する秘密鍵を使って行った署名のみが、その秘密鍵と対になる公開鍵で正常に確認できます。<br />
　秘密鍵を知らない者が他の秘密鍵で署名しても、正当な公開鍵では署名を確認できないことになります。公開鍵から秘密鍵を推測することは不可能ですので、秘密鍵を持っている人しか正当な署名ができないことになります。<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
本来は、その「公開鍵」が公開される際に、その「公開鍵」が正当な物かどうかを確認させる必要があります。公開鍵がそもそも正当なものかどうかが分からなければ、電子署名の意味は薄くなります。しかし、吉里吉里のキー・署名ツールではそこまでの考慮は行っていません。</div><br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
吉里吉里のキー・署名ツールが用いる暗号方式は2.25beta7でECC(楕円曲線暗号)からRSAに変更になりました。<br />
吉里吉里のキー・署名ツールが生成するRSAキーの長さは1024ビットです。また、秘密鍵はパスフレーズでの保護は行われません。<br />
吉里吉里のキー・署名ツールが生成するRSA公開鍵・秘密鍵は他のソフトウェアのPEM形式のキーと互換性がありますが、キー・署名ツール以外で生成したキーを使った場合、あるいはキー・署名ツールで生成したキーを他のソフトウェアで使用した場合の動作はサポート外です。<br />
</div><br />
</div></div>
<h1><a id="id247" name="id247"><a id="id247" name="id247" class="targanchor"><dfn>キー生成</dfn></a>のしかた</a>
</h1><div class="para"><div>
<br />
　キー・署名ツール(tools 文件夹にある krkrsign.exe)を起動すると最初に表示されるのはキー生成の画面です。<br />
<img width="375" height="416" alt="sign0.png" src="sign0.png" /><br />
<br />
<br />
<dl>
<dt>「生成する」ボタン</dt>
<dd>　クリックするとキーペアの生成が始まります。最初に「エントロピーを収集中」という窗口が現れ、鼠标をでたらめに動かすことを要求されるので、指示に従ってください(他人に推測されないキーを生成する為に必要です)。<br />
　窗口が閉じると、下の「生成された公開鍵」と「生成された秘密鍵」の欄に、生成されたキーペアが表示されます。<br />
</dd>
<dt>生成された公開鍵</dt>
<dd>　生成された公開鍵が表示されます。横の「コピー」ボタンを押すと、鍵をクリップボードにコピーすることができます。</dd>
<dt>生成された秘密鍵</dt>
<dd>　生成された秘密鍵が表示されます。横の「コピー」ボタンを押すと、鍵をクリップボードにコピーすることができます。<br />
　セキュリティの都合上、この窗口を閉じるときにクリップボードの内容はクリアされるので注意してください。<br />
</dd></dl></div></div>

<h1><a id="id248" name="id248"><a id="id248" name="id248" class="targanchor"><dfn>署名</dfn></a>のしかた</a>
</h1><div class="para"><div>
<br />
　「署名」タブをクリックすると、署名の画面が表示されます。<br />
<img width="375" height="416" alt="sign1.png" src="sign1.png" /><br />
<br />
<br />
<dl>
<dt>秘密鍵</dt>
<dd>　秘密鍵を指定してください。</dd>
<dt>対象文件</dt>
<dd>　署名の対象となる文件を指定することができます。<br />
　「参照」ボタンを押すと、文件参照对话框ボックスが開くので、対象とする文件を指定してください。<br />
　この窗口に対象とする文件をドロップすることでも、対象文件を指定することができます(現バージョンでは複数文件を一度に署名することはできません)。<br />
</dd>
<dt>「署名する」ボタン</dt>
<dd>　対象となる文件を署名します。<br />
　署名文件は、対象文件の文件名に、拡張子 .sig が付加された文件名になりますが、例外的に吉里吉里本体の場合は、本体に署名が埋め込まれます。<br />
</dd></dl></div></div>
<h1><a id="id249" name="id249"><a id="id249" name="id249" class="targanchor"><dfn>署名確認</dfn></a>のしかた</a>
</h1><div class="para"><div>
<br />
　「署名確認」タブをクリックすると、署名の画面が表示されます。<br />
<img width="375" height="416" alt="sign2.png" src="sign2.png" /><br />
<br />
<br />
<dl>
<dt>公開鍵</dt>
<dd>　公開鍵を指定してください。</dd>
<dt>対象文件</dt>
<dd>　署名確認の対象となる文件を指定することができます。<br />
　「参照」ボタンを押すと、文件参照对话框ボックスが開くので、対象とする文件を指定してください。<br />
　この窗口に対象とする文件をドロップすることでも、対象文件を指定することができます(現バージョンでは、このツールで複数文件の署名を一度に確認することはできません)。<br />
</dd>
<dt>「チェック」ボタン</dt>
<dd>　対象文件の署名を確認します。<br />
　結果はメッセージボックスで通知されます。</dd></dl></div></div>

<h1><a id="id250" name="id250">コマンドラインからの使用法</a>
</h1><div class="para"><div>
　コマンドラインからキー・署名ツールを使用することにより、文件に署名を行うことができます。これはmakeなどのツールと組み合わせて使うときに便利です。<br />
　以下の書式で指定します。<br />

<br />
<code class="bq">krkrsign&nbsp;-sign&nbsp;&quot;対象文件名&quot;&nbsp;&quot;秘密鍵文件名&quot;</code>
<br />

秘密鍵文件名には、秘密鍵をテキストとして保存した文件を指定してください。<br />
たとえば、game.eXe に署名する場合は<br />

<br />
<code class="bq">krkrsign&nbsp;-sign&nbsp;&quot;game.eXe&quot;&nbsp;&quot;key.priv&quot;</code>
<br />

　と指定します。一回の呼び出しでは一個の文件しか署名できません。</div></div>



	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
